Приложение на основе Spring Boot, использует внутренний кэш JCache. Алгоритм по умолчанию LRU. Натройки кэша:

1. Максимальное число хранимых объектов  - 100.

2. Время жизни объекта в кэше 10 минут


Запуск кластера: 
./start.sh

После стабилизации кластера запустить загрузку случайных данных в БД: 
./load-data.sh

Будет создано 1000 записей в таблице product с колонками: id:long, name:varchar, category:varchar, price:float.

Можно запускать загрузку объектов не один раз, но это лишнее, поскольку далее в скрипте postman запросов на чтение задан диапазон значений 1-1000.

Моделирование потока из 1000 запросов на чтение производится командой 
./get-data.sh

Выполняется поиск объектов product по id. Алгоритм запросов сделан так, чтобы 90% всех запросов приходились на объекты с id от 1 до 100.

Изменить это соотношение можно, заменив число 11 на другое в строке 16 файла Product_get.postman_collection.json.

Для большей наглядности в приложении добавлена заджержка в 20 мс при непопадании в кэш. 

Пытался вывести наружу из контейнера jmx порт для просмотра статистики кэширования, но не получилось. При локальном запуске можно было наблюдать за статистикой кэша через jconsole (входит в любой JDK), подключившись к MBean javax.cache/CacheStatistics/file.../productCache сервера приложений.

Также в консоль сервера приложений (лог) выводится информация о событиях кэша и запросах в БД.   

Кэш можно отключить, заменив значение параметра spring.cache.type на none в строке 12 манифеста config-map.yaml.

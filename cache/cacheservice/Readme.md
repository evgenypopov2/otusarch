Запуск Prometheus:
helm install -n prom stable/prometheus-operator -f prometheus.yaml

Запуск приложения:
helm install -n cacheservice ./cacheservice-chart

Namespace cache

Перед тестированием необходимо загрузить данные командой 
./load-data.sh
Загружается 1000 случайно сгенерированных объектов.

Для нагрузочного тестирования использовался Jmeter, файл конфигурации "Test Product service.jmx"

В тестировании использовались запросы:
1. GET /product - получить список всех объектов
2. GET /product/{id} - получить данные по одному объекту

Размер кэша 1000 объектов

Имитировалась работа пользователей, запрашивающих:
1. список всех объектов 1 раз в 5 секунд
2. данные одного случайного объекта 1 раз в 10 секунд

Первый этап, тестирование сервиса с кэшем (кэшируются запросы только по конкретному объекту)
Количество пользователей 300+300 (соответственно по запросу 1 - 60 запросов в секунду, по запросу 2 - 30 запросов в секунду)
На скриншоте graf8.png видно, как первые пару минут "прогревался" кэш, и среднее время запроса 2 (конкретного объекта) постепенно уменьшалось.
Скриншот graph9.png: временное снижение производительности сервиса (причина непонятна)
Лог тестирования JMeter ./results/withcache/testproduct.jtl, HTML-отчёт в папке ./results/withcache/html-report

Второй этап, тестирование без кэша.
Количество пользователей 300+300 (соответственно по запросу 1 - 60 запросов в секунду, по запросу 2 - 30 запросов в секунду)
На скриншоте graf10.png видно, что теперь время выполнения каждого запроса почти не отличается.
В процессе тестирования ошибок не возникло.
Лог тестирования JMeter ./results/withoutcache/testproduct.jtl, HTML-отчёт в папке ./results/withoutcache/html-report


Выводы:
1. Кэш позволяет значительно увеличить производительность сервиса при запросах к объектам сервиса.
2. Получилось, что работа сервиса без кэша может увеличить его надёжность.

==================
справочно для меня, полезные команды
kubectl port-forward service/prom-prometheus-operator-prometheus 9090
kubectl port-forward service/prom-grafana 9000:80
